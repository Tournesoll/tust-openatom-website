<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>首次设置向导 - Jekyll 文章管理</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="css/setup-wizard.css">
</head>
<body>
  <div class="wizard-container">
    <!-- 顶部标题栏 -->
    <header class="wizard-header">
      <div class="wizard-logo">
        <i class="fas fa-magic"></i>
        <h1>Jekyll 文章管理系统</h1>
      </div>
      <div class="wizard-progress">
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
        <div class="progress-text">
          <span id="current-step">1</span> / <span id="total-steps">6</span>
        </div>
      </div>
    </header>

    <!-- 主内容区 -->
    <main class="wizard-content">
      <!-- 步骤 1: 欢迎 -->
      <div class="wizard-step active" data-step="1">
        <div class="step-content">
          <div class="step-icon">
            <i class="fas fa-hand-sparkles"></i>
          </div>
          <h2>欢迎使用 Jekyll 文章管理系统</h2>
          <p class="step-description">
            这是一个简单易用的博客管理系统，让你可以像使用 Word 一样管理你的 Jekyll 博客。
          </p>
          
          <div class="features-list">
            <div class="feature-item">
              <i class="fas fa-check-circle"></i>
              <span>可视化文章编辑</span>
            </div>
            <div class="feature-item">
              <i class="fas fa-check-circle"></i>
              <span>自动部署到 GitHub Pages</span>
            </div>
            <div class="feature-item">
              <i class="fas fa-check-circle"></i>
              <span>Markdown 实时预览</span>
            </div>
            <div class="feature-item">
              <i class="fas fa-check-circle"></i>
              <span>一键发布文章</span>
            </div>
          </div>

          <div class="requirements-box">
            <h3>开始前请准备：</h3>
            <ul>
              <li>✅ GitHub 账号（如果没有，请先注册：<a href="https://github.com/signup" target="_blank">github.com/signup</a>）</li>
              <li>✅ 大约 5-10 分钟时间</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- 步骤 2: GitHub OAuth App -->
      <div class="wizard-step" data-step="2">
        <div class="step-content">
          <div class="step-icon">
            <i class="fab fa-github"></i>
          </div>
          <h2>配置 GitHub OAuth App</h2>
          <p class="step-description">
            首先需要创建一个 GitHub OAuth App，用于登录和访问你的仓库。
          </p>

          <div class="tutorial-section">
            <div class="tutorial-header">
              <h3>📖 创建 OAuth App 教程</h3>
              <button class="btn-link" id="toggle-tutorial">
                <i class="fas fa-chevron-down"></i> 展开教程
              </button>
            </div>
            <div class="tutorial-content" id="tutorial-content">
              <ol class="tutorial-steps">
                <li>
                  <strong>访问 GitHub 设置页面</strong>
                  <p>打开浏览器，访问：<a href="https://github.com/settings/developers" target="_blank">https://github.com/settings/developers</a></p>
                </li>
                <li>
                  <strong>创建新的 OAuth App</strong>
                  <p>点击页面右上角的 <strong>"New OAuth App"</strong> 按钮</p>
                </li>
                <li>
                  <strong>填写应用信息</strong>
                  <ul>
                    <li><strong>Application name:</strong> 任意名称，如 "我的博客管理"</li>
                    <li><strong>Homepage URL:</strong> <code>http://localhost:8888</code></li>
                    <li><strong>Authorization callback URL:</strong> <code>http://localhost:8888/api/auth/github/callback</code></li>
                  </ul>
                </li>
                <li>
                  <strong>注册应用</strong>
                  <p>点击 <strong>"Register application"</strong> 按钮</p>
                </li>
                <li>
                  <strong>获取凭证</strong>
                  <p>记录下 <strong>Client ID</strong>，然后点击 <strong>"Generate a new client secret"</strong> 生成并记录 <strong>Client Secret</strong></p>
                  <div class="warning-box">
                    <i class="fas fa-exclamation-triangle"></i>
                    <strong>重要：</strong>Client Secret 只显示一次，请妥善保存！
                  </div>
                </li>
              </ol>
            </div>
          </div>

          <div class="form-section">
            <h3>填写 OAuth App 信息</h3>
            <div class="form-group">
              <label for="oauth-client-id">
                Client ID <span class="required">*</span>
              </label>
              <input 
                type="text" 
                id="oauth-client-id" 
                class="form-input" 
                placeholder="例如：Ov23li4O8m6iO9mGQK4P"
                required
              >
              <small class="form-hint">从 GitHub OAuth App 页面复制 Client ID</small>
            </div>

            <div class="form-group">
              <label for="oauth-client-secret">
                Client Secret <span class="required">*</span>
              </label>
              <input 
                type="password" 
                id="oauth-client-secret" 
                class="form-input" 
                placeholder="例如：576ae9e34cd949ef000e5b88005479f1f865d3a5"
                required
              >
              <small class="form-hint">从 GitHub OAuth App 页面复制 Client Secret</small>
            </div>

            <button class="btn btn-primary" id="verify-oauth-btn">
              <i class="fas fa-check"></i> 验证并保存
            </button>
            <div id="oauth-status" class="status-message"></div>
          </div>
        </div>
      </div>

      <!-- 步骤 3: GitHub 仓库 -->
      <div class="wizard-step" data-step="3">
        <div class="step-content">
          <div class="step-icon">
            <i class="fas fa-folder-open"></i>
          </div>
          <h2>配置 GitHub 仓库</h2>
          <p class="step-description">
            选择使用现有仓库或创建新仓库来存储你的博客内容。
          </p>

          <div class="form-section">
            <div class="form-group">
              <label for="github-username">
                GitHub 用户名 <span class="required">*</span>
              </label>
              <input 
                type="text" 
                id="github-username" 
                class="form-input" 
                placeholder="例如：your-username"
                required
              >
            </div>

            <div class="form-group">
              <label for="github-repo">
                仓库名称 <span class="required">*</span>
              </label>
              <input 
                type="text" 
                id="github-repo" 
                class="form-input" 
                placeholder="例如：my-blog"
                required
              >
              <small class="form-hint">只能包含字母、数字、点、下划线和连字符</small>
            </div>

            <div class="repo-actions">
              <button class="btn btn-secondary" id="check-repo-btn">
                <i class="fas fa-search"></i> 检查仓库
              </button>
              <button class="btn btn-secondary" id="create-repo-btn" style="display: none;">
                <i class="fas fa-plus"></i> 创建仓库
              </button>
            </div>

            <div id="repo-status" class="status-message"></div>

            <div class="info-box" id="repo-info" style="display: none;">
              <h4>需要 GitHub Token 来创建/检查仓库</h4>
              <p>请访问 <a href="https://github.com/settings/tokens" target="_blank">GitHub Settings → Developer settings → Personal access tokens</a></p>
              <p>创建一个新的 token，权限选择 <code>repo</code>，然后粘贴到下方：</p>
              <input 
                type="password" 
                id="github-token" 
                class="form-input" 
                placeholder="ghp_xxxxxxxxxxxxxxxxxxxx"
              >
            </div>
          </div>
        </div>
      </div>

      <!-- 步骤 4: 网站信息 -->
      <div class="wizard-step" data-step="4">
        <div class="step-content">
          <div class="step-icon">
            <i class="fas fa-globe"></i>
          </div>
          <h2>配置网站信息</h2>
          <p class="step-description">
            设置你的网站标题、描述等信息，这些可以在稍后修改。
          </p>

          <div class="form-section">
            <div class="form-group">
              <label for="site-title">
                网站标题 <span class="required">*</span>
              </label>
              <input 
                type="text" 
                id="site-title" 
                class="form-input" 
                placeholder="例如：我的技术博客"
                value="我的博客"
                required
              >
            </div>

            <div class="form-group">
              <label for="site-description">
                网站描述
              </label>
              <textarea 
                id="site-description" 
                class="form-input" 
                rows="3"
                placeholder="例如：分享技术心得和学习笔记"
              >使用 Jekyll 构建的博客网站</textarea>
            </div>

            <div class="form-group">
              <label for="site-author">
                作者名称
              </label>
              <input 
                type="text" 
                id="site-author" 
                class="form-input" 
                placeholder="例如：张三"
              >
            </div>
          </div>
        </div>
      </div>

      <!-- 步骤 5: 部署 -->
      <div class="wizard-step" data-step="5">
        <div class="step-content">
          <div class="step-icon">
            <i class="fas fa-rocket"></i>
          </div>
          <h2>自动部署</h2>
          <p class="step-description">
            系统将自动配置并部署你的网站到 GitHub Pages。
          </p>

          <div class="deploy-section">
            <div class="deploy-progress" id="deploy-progress" style="display: none;">
              <div class="progress-item">
                <i class="fas fa-spinner fa-spin"></i>
                <span id="deploy-message">准备部署...</span>
              </div>
              <div class="progress-bar-horizontal">
                <div class="progress-fill-horizontal" id="deploy-progress-fill"></div>
              </div>
            </div>

            <div class="deploy-log" id="deploy-log"></div>

            <button class="btn btn-primary btn-large" id="start-deploy-btn">
              <i class="fas fa-play"></i> 开始部署
            </button>
          </div>
        </div>
      </div>

      <!-- 步骤 6: 完成 -->
      <div class="wizard-step" data-step="6">
        <div class="step-content">
          <div class="step-icon success">
            <i class="fas fa-check-circle"></i>
          </div>
          <h2>配置完成！</h2>
          <p class="step-description">
            恭喜！你的博客管理系统已经配置完成，可以开始使用了。
          </p>

          <div class="success-info">
            <div class="info-card">
              <h3><i class="fas fa-globe"></i> 网站地址</h3>
              <p id="site-url" class="url-text">-</p>
              <a href="#" id="site-url-link" target="_blank" class="btn btn-link">
                <i class="fas fa-external-link-alt"></i> 访问网站
              </a>
            </div>

            <div class="info-card">
              <h3><i class="fas fa-cog"></i> 管理后台</h3>
              <p class="url-text">http://localhost:8888</p>
              <p class="info-text">使用桌面应用管理你的文章</p>
            </div>
          </div>

          <div class="next-steps">
            <h3>接下来你可以：</h3>
            <ul>
              <li>📝 创建你的第一篇文章</li>
              <li>🎨 自定义网站样式和内容</li>
              <li>📚 查看使用文档了解更多功能</li>
            </ul>
          </div>

          <button class="btn btn-primary btn-large" id="start-using-btn">
            <i class="fas fa-arrow-right"></i> 开始使用
          </button>
        </div>
      </div>
    </main>

    <!-- 底部导航 -->
    <footer class="wizard-footer">
      <button class="btn btn-secondary" id="prev-btn" disabled>
        <i class="fas fa-arrow-left"></i> 上一步
      </button>
      <button class="btn btn-primary" id="next-btn">
        下一步 <i class="fas fa-arrow-right"></i>
      </button>
    </footer>
  </div>

  <script src="js/setup-wizard.js"></script>
</body>
</html>



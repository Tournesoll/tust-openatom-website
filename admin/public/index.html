<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jekyll 文章管理后台</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Marked.js for Markdown preview -->
  <script src="https://cdn.jsdelivr.net/npm/marked@11.0.0/marked.min.js"></script>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- 登录界面 -->
  <div id="login-screen" class="screen">
    <div class="login-container">
      <div class="login-card">
        <div class="login-icon">
          <i class="fas fa-lock"></i>
        </div>
        <h1 class="login-title">Jekyll 文章管理后台</h1>
        <p class="login-subtitle">使用 GitHub 账号登录以管理文章</p>
        <button id="login-btn" class="button is-primary is-large is-fullwidth">
          <span class="icon"><i class="fab fa-github"></i></span>
          <span>使用 GitHub 登录</span>
        </button>
      </div>
    </div>
  </div>

  <!-- 主界面 -->
  <div id="main-screen" class="screen hidden">
    <!-- 顶部导航栏 -->
    <nav class="navbar is-dark" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">
        <a class="navbar-item" href="#">
          <i class="fas fa-pen-fancy"></i>
          <span class="ml-2">文章管理</span>
        </a>
        <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarMenu">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div id="navbarMenu" class="navbar-menu">
        <div class="navbar-end">
          <div class="navbar-item">
            <span id="user-info" class="has-text-light mr-4"></span>
            <div class="buttons">
              <button id="pull-btn" class="button is-light is-small">
                <span class="icon"><i class="fas fa-sync-alt"></i></span>
                <span>拉取更新</span>
              </button>
              <button id="new-post-btn" class="button is-primary is-small">
                <span class="icon"><i class="fas fa-plus"></i></span>
                <span>新建文章</span>
              </button>
              <button id="logout-btn" class="button is-light is-small">
                <span class="icon"><i class="fas fa-sign-out-alt"></i></span>
                <span>登出</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <!-- 主内容区 -->
    <section class="section">
      <div class="container">
        <!-- 搜索栏 - 苹果风格 -->
        <div class="search-container">
          <div class="search-box">
            <i class="fas fa-search search-icon"></i>
            <input type="text" id="search-input" class="search-input" placeholder="搜索文章标题、内容、标签...">
            <button class="search-clear" id="search-clear" style="display: none;">
              <i class="fas fa-times"></i>
            </button>
          </div>
        </div>

        <!-- 筛选栏 -->
        <div class="box mb-5">
          <div class="field is-grouped is-grouped-multiline">
            <div class="control">
              <div class="select">
                <select id="filter-published">
                  <option value="all">全部状态</option>
                  <option value="published">已发布</option>
                  <option value="hidden">已隐藏</option>
                </select>
              </div>
            </div>
            <div class="control">
              <div class="select">
                <select id="filter-category">
                  <option value="all">全部分类</option>
                </select>
              </div>
            </div>
            <div class="control">
              <button class="button is-light" id="manage-tags-btn">
                <span class="icon"><i class="fas fa-tags"></i></span>
                <span>管理标签</span>
              </button>
            </div>
          </div>
        </div>

        <!-- 文章列表 -->
        <div id="posts-list" class="columns is-multiline">
          <div class="column is-12">
            <div class="loading has-text-centered py-6">
              <i class="fas fa-spinner fa-spin fa-2x"></i>
              <p class="mt-3">加载中...</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- 编辑文章模态框 -->
  <div id="edit-modal" class="modal">
    <div class="modal-background" id="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title" id="modal-title">
          <i class="fas fa-file-alt"></i>
          <span class="ml-2">新建文章</span>
        </p>
        <button class="delete" aria-label="close" id="modal-close-btn"></button>
      </header>
      <section class="modal-card-body">
        <form id="post-form">
          <!-- 标题 -->
          <div class="field">
            <label class="label">标题 <span class="has-text-danger">*</span></label>
            <div class="control">
              <input class="input" type="text" id="post-title" placeholder="请输入文章标题" required>
            </div>
          </div>

          <!-- 日期和分类 -->
          <div class="field is-grouped">
            <div class="field-body">
              <div class="field">
                <label class="label">发布日期 <span class="has-text-danger">*</span></label>
                <div class="control">
                  <input class="input" type="datetime-local" id="post-date" required>
                </div>
              </div>
              <div class="field">
                <label class="label">分类 <span class="has-text-danger">*</span></label>
                <div class="control">
                  <div class="select is-fullwidth">
                    <select id="post-categories" required>
                      <option value="frontend">🎨 前端技术</option>
                      <option value="backend">⚙️ 后端技术</option>
                      <option value="design">✨ 设计</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 布局选择 -->
          <div class="field">
            <label class="label">
              布局
              <span class="icon has-text-info" title="布局决定了文章在网站上的显示方式">
                <i class="fas fa-info-circle"></i>
              </span>
            </label>
            <div class="control">
              <div class="select is-fullwidth">
                <select id="post-layout">
                  <option value="post">文章 (post) - 标准文章布局，带侧边栏和目录</option>
                  <option value="default">默认 (default) - 使用默认布局</option>
                  <option value="home">首页 (home) - 首页布局</option>
                  <option value="category">分类 (category) - 分类页面布局</option>
                </select>
              </div>
            </div>
            <p class="help">选择文章在网站上的显示布局模板</p>
          </div>

          <!-- 标签管理 -->
          <div class="field">
            <label class="label">标签</label>
            <div class="control">
              <div class="tags-input-container">
                <div id="tags-display" class="tags mb-2"></div>
                <div class="field has-addons">
                  <div class="control is-expanded">
                    <input class="input" type="text" id="tag-input" placeholder="输入标签后按回车添加">
                  </div>
                  <div class="control">
                    <button type="button" class="button" id="add-tag-btn">
                      <span class="icon"><i class="fas fa-plus"></i></span>
                    </button>
                  </div>
                </div>
                <div class="common-tags mt-2">
                  <p class="help mb-2">常用标签：</p>
                  <div id="common-tags" class="tags">
                    <span class="tag is-light is-clickable" data-tag="教程">教程</span>
                    <span class="tag is-light is-clickable" data-tag="入门">入门</span>
                    <span class="tag is-light is-clickable" data-tag="进阶">进阶</span>
                    <span class="tag is-light is-clickable" data-tag="实战">实战</span>
                    <span class="tag is-light is-clickable" data-tag="JavaScript">JavaScript</span>
                    <span class="tag is-light is-clickable" data-tag="Python">Python</span>
                    <span class="tag is-light is-clickable" data-tag="Vue">Vue</span>
                    <span class="tag is-light is-clickable" data-tag="React">React</span>
                    <span class="tag is-light is-clickable" data-tag="Node.js">Node.js</span>
                    <span class="tag is-light is-clickable" data-tag="Git">Git</span>
                    <span class="tag is-light is-clickable" data-tag="Linux">Linux</span>
                    <span class="tag is-light is-clickable" data-tag="设计">设计</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 作者和发布状态 -->
          <div class="field is-grouped">
            <div class="field-body">
              <div class="field">
                <label class="label">作者</label>
                <div class="control">
                  <input class="input" type="text" id="post-author" value="技术社团">
                </div>
              </div>
              <div class="field">
                <label class="label">发布状态</label>
                <div class="control">
                  <label class="checkbox">
                    <input type="checkbox" id="post-published" checked>
                    发布（取消勾选将隐藏文章）
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- 摘要 -->
          <div class="field">
            <label class="label">摘要</label>
            <div class="control">
              <textarea class="textarea" id="post-excerpt" rows="2" placeholder="文章摘要，会显示在文章列表中"></textarea>
            </div>
          </div>

          <!-- 正文 -->
          <div class="field">
            <label class="label">正文（Markdown） <span class="has-text-danger">*</span></label>
            <div class="editor-container">
              <div class="editor-tabs">
                <button type="button" class="editor-tab active" data-tab="edit">编辑</button>
                <button type="button" class="editor-tab" data-tab="preview">预览</button>
              </div>
              <div class="editor-content">
                <textarea class="textarea" id="post-body" rows="20" placeholder="使用 Markdown 格式编写文章内容..." required></textarea>
                <div id="preview" class="preview-content hidden"></div>
              </div>
            </div>
          </div>

          <!-- 表单操作 -->
          <div class="field is-grouped is-grouped-right">
            <div class="control">
              <button type="button" class="button is-light" id="cancel-btn">取消</button>
            </div>
            <div class="control">
              <button type="submit" class="button is-primary">
                <span class="icon"><i class="fas fa-save"></i></span>
                <span>保存</span>
              </button>
            </div>
            <div class="control">
              <button type="button" id="save-and-push-btn" class="button is-success">
                <span class="icon"><i class="fas fa-cloud-upload-alt"></i></span>
                <span>保存并推送</span>
              </button>
            </div>
          </div>
        </form>
      </section>
    </div>
  </div>

  <script src="js/app.js"></script>
</body>
</html>

# 🧪 Electron 桌面应用测试指南

## ✅ 已完成的工作

1. ✅ **核心文件创建**
   - `main.js` - Electron 主进程
   - 更新 `package.json` - 添加 Electron 配置
   - 创建启动脚本 `start.bat` 和 `start.sh`

2. ✅ **依赖安装**
   - Electron 28.3.3 ✅
   - electron-builder 24.13.3 ✅

3. ✅ **配置文件**
   - `config.json` 已存在且配置正确 ✅

## 🚀 测试步骤

### 方式一：使用启动脚本（推荐）

**Windows:**
```
双击 start.bat
```

**Mac/Linux:**
```bash
chmod +x start.sh
./start.sh
```

### 方式二：使用 npm 命令

```bash
npm run electron
```

### 方式三：开发模式（带开发者工具）

```bash
# Windows PowerShell
$env:NODE_ENV="development"; npm run electron

# Mac/Linux
NODE_ENV=development npm run electron
```

## 📋 测试清单

### 1. 应用启动测试
- [ ] 双击启动脚本后，应用窗口是否打开？
- [ ] 是否显示加载界面（等待 2-3 秒）？
- [ ] 是否自动打开管理后台界面？

### 2. 服务器启动测试
- [ ] 服务器是否自动启动？
- [ ] 控制台是否显示 "🚀 管理后台已启动！"？
- [ ] 是否能正常访问 http://localhost:3000？

### 3. 功能测试
- [ ] 能否正常登录（GitHub OAuth）？
- [ ] 能否查看文章列表？
- [ ] 能否创建新文章？
- [ ] 能否编辑文章？
- [ ] 能否删除文章？
- [ ] Git 操作是否正常？

### 4. 窗口功能测试
- [ ] 窗口大小调整是否正常？
- [ ] 菜单栏是否显示？
- [ ] 快捷键是否生效（Ctrl+N 新建文章）？
- [ ] 关闭窗口时服务器是否自动停止？

## 🐛 常见问题排查

### 问题1：应用无法启动

**检查项：**
1. Node.js 是否已安装？运行 `node --version`
2. 依赖是否已安装？运行 `npm list electron`
3. 端口 3000 是否被占用？

**解决方法：**
```bash
# 检查端口占用（Windows）
netstat -ano | findstr :3000

# 检查端口占用（Mac/Linux）
lsof -i :3000
```

### 问题2：服务器启动失败

**检查项：**
1. `config.json` 文件是否存在？
2. 配置文件格式是否正确（JSON 格式）？
3. 文章目录路径是否正确？

**解决方法：**
```bash
# 检查配置文件
cat config.json

# 检查文章目录
ls ../_posts
```

### 问题3：窗口打开但显示空白

**检查项：**
1. 服务器是否真的启动了？
2. 浏览器控制台是否有错误？
3. 网络请求是否成功？

**解决方法：**
- 打开开发者工具（F12 或 Cmd+Option+I）
- 查看 Console 和 Network 标签
- 检查是否有错误信息

## 📦 打包测试

如果应用运行正常，可以尝试打包：

```bash
# Windows 打包
npm run build:win

# 打包后的文件在 dist/ 目录
# - Jekyll 文章管理 Setup 1.0.0.exe (安装程序)
# - Jekyll 文章管理-1.0.0.exe (便携版)
```

打包后测试：
1. 关闭开发环境的应用
2. 运行打包后的 .exe 文件
3. 测试所有功能是否正常

## ✨ 预期效果

正常运行时，你应该看到：

1. **启动过程：**
   - 双击启动脚本
   - 控制台显示服务器启动信息
   - 2-3 秒后应用窗口自动打开
   - 显示管理后台登录界面

2. **应用界面：**
   - 窗口大小：1200x800
   - 深色背景
   - 顶部菜单栏（文件、编辑、视图、帮助）
   - 管理后台界面

3. **功能：**
   - 点击"使用 GitHub 登录"可以登录
   - 登录后可以看到文章列表
   - 可以创建、编辑、删除文章

## 📝 测试结果记录

测试完成后，请记录：

- [ ] 应用能否正常启动？
- [ ] 服务器是否自动启动？
- [ ] 所有功能是否正常？
- [ ] 是否有任何错误或问题？

如有问题，请记录错误信息并反馈。


# æœ¬åœ°å¼€å‘æŒ‡å—

## âœ… å¯ä»¥åœ¨æœ¬åœ°è¿è¡Œï¼

**ç­”æ¡ˆï¼šæ˜¯çš„ï¼Œå®Œå…¨å¯ä»¥åœ¨æœ¬åœ°è¿è¡Œï¼Œå¹¶ä¸”èƒ½æ­£å¸¸è§¦å‘ OAuth ä»£ç†ï¼**

## ä¸ºä»€ä¹ˆå¯ä»¥ï¼Ÿ

1. **Cloudflare Workers æ˜¯äº‘ç«¯æœåŠ¡**
   - Worker éƒ¨ç½²åœ¨ Cloudflare çš„å…¨çƒç½‘ç»œä¸Š
   - ä»ä»»ä½•åœ°æ–¹ï¼ˆæœ¬åœ°ã€GitHub Pagesã€ä»»ä½•æœåŠ¡å™¨ï¼‰éƒ½èƒ½è®¿é—®
   - URLï¼š`https://sveltia-cms-auth.2302626736.workers.dev`

2. **OAuth æµç¨‹ä¸ä¾èµ–æœ¬åœ°ç¯å¢ƒ**
   - OAuth è®¤è¯æµç¨‹å®Œå…¨é€šè¿‡ Worker å¤„ç†
   - æœ¬åœ°åªæ˜¯è®¿é—® Worker çš„å®¢æˆ·ç«¯
   - Worker è´Ÿè´£ä¸ GitHub API é€šä¿¡

3. **é…ç½®å®Œå…¨ä¸€è‡´**
   - æœ¬åœ°å’Œçº¿ä¸Šä½¿ç”¨ç›¸åŒçš„ `config.yml`
   - éƒ½æŒ‡å‘åŒä¸€ä¸ª Worker URL
   - éƒ½ä½¿ç”¨ç›¸åŒçš„ GitHub OAuth App

## æœ¬åœ°è¿è¡Œæ­¥éª¤

### 1. å¯åŠ¨ Jekyll æœ¬åœ°æœåŠ¡å™¨

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
bundle exec jekyll serve
```

æˆ–è€…ï¼š

```bash
jekyll serve
```

### 2. è®¿é—®æœ¬åœ°ç®¡ç†åå°

æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼š
```
http://localhost:4000/tust-openatom-website/admin/
```

æˆ–è€…ï¼š
```
http://127.0.0.1:4000/tust-openatom-website/admin/
```

### 3. ç™»å½•æµç¨‹

1. ç‚¹å‡» "Login with GitHub"
2. ä¼šè·³è½¬åˆ° Cloudflare Workerï¼š`https://sveltia-cms-auth.2302626736.workers.dev/auth`
3. Worker é‡å®šå‘åˆ° GitHub OAuth æˆæƒé¡µé¢
4. æˆæƒåï¼ŒGitHub å›è°ƒåˆ° Workerï¼š`https://sveltia-cms-auth.2302626736.workers.dev/callback`
5. Worker è¿”å› access token
6. Decap CMS ä½¿ç”¨ token è®¿é—® GitHub API
7. ç™»å½•æˆåŠŸï¼Œå¯ä»¥ç®¡ç†å†…å®¹

## å·¥ä½œæµç¨‹

```
æœ¬åœ°æµè§ˆå™¨ (localhost:4000)
    â†“
è®¿é—® /admin/
    â†“
Decap CMS åŠ è½½
    â†“
ç‚¹å‡» "Login with GitHub"
    â†“
è·³è½¬åˆ° Cloudflare Worker (äº‘ç«¯)
    â†“
Worker é‡å®šå‘åˆ° GitHub OAuth
    â†“
GitHub æˆæƒ
    â†“
å›è°ƒåˆ° Worker (äº‘ç«¯)
    â†“
Worker è¿”å› token
    â†“
Decap CMS ä½¿ç”¨ token
    â†“
è®¿é—® GitHub API (äº‘ç«¯)
    â†“
è¯»å†™ä»“åº“å†…å®¹
```

## ä¼˜åŠ¿

âœ… **æœ¬åœ°å¼€å‘æ›´æ–¹ä¾¿**
- ä¿®æ”¹é…ç½®åç«‹å³ç”Ÿæ•ˆ
- ä¸éœ€è¦ç­‰å¾… GitHub Pages æ„å»º
- å¯ä»¥å¿«é€Ÿæµ‹è¯•åŠŸèƒ½

âœ… **è°ƒè¯•æ›´å®¹æ˜“**
- å¯ä»¥ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·
- å¯ä»¥çœ‹åˆ°è¯¦ç»†çš„ç½‘ç»œè¯·æ±‚
- å¯ä»¥æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯

âœ… **é…ç½®ä¸€è‡´**
- æœ¬åœ°å’Œçº¿ä¸Šä½¿ç”¨ç›¸åŒé…ç½®
- ä¸ä¼šå‡ºç°ç¯å¢ƒå·®å¼‚é—®é¢˜

## æ³¨æ„äº‹é¡¹

1. **ç¡®ä¿ Jekyll æœåŠ¡æ­£å¸¸è¿è¡Œ**
   ```bash
   # æ£€æŸ¥æœåŠ¡æ˜¯å¦å¯åŠ¨
   # åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
   # Server address: http://127.0.0.1:4000/tust-openatom-website/
   ```

2. **ç¡®ä¿ baseurl é…ç½®æ­£ç¡®**
   - `_config.yml` ä¸­çš„ `baseurl: "/tust-openatom-website"`
   - æœ¬åœ°è®¿é—®æ—¶éœ€è¦åŒ…å« baseurl

3. **GitHub OAuth App å›è°ƒ URL**
   - å½“å‰è®¾ç½®ä¸ºï¼š`https://sveltia-cms-auth.2302626736.workers.dev/callback`
   - è¿™ä¸ªè®¾ç½®å¯¹æœ¬åœ°å’Œçº¿ä¸Šéƒ½æœ‰æ•ˆ
   - å› ä¸º OAuth æµç¨‹å®Œå…¨é€šè¿‡ Worker å¤„ç†

## æµ‹è¯•æ­¥éª¤

1. **å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨**
   ```bash
   bundle exec jekyll serve
   ```

2. **è®¿é—®ç®¡ç†åå°**
   ```
   http://localhost:4000/tust-openatom-website/admin/
   ```

3. **æµ‹è¯•ç™»å½•**
   - ç‚¹å‡» "Login with GitHub"
   - åº”è¯¥èƒ½æ­£å¸¸è·³è½¬å’Œæˆæƒ

4. **æµ‹è¯•åŠŸèƒ½**
   - åˆ›å»ºæ–‡ç« 
   - ç¼–è¾‘æ–‡ç« 
   - åˆ é™¤æ–‡ç« 
   - ä¸Šä¼ å›¾ç‰‡

## å¸¸è§é—®é¢˜

### Q: æœ¬åœ°è®¿é—®æ—¶æ˜¾ç¤º 404ï¼Ÿ
**A:** æ£€æŸ¥ baseurl é…ç½®ï¼Œç¡®ä¿ URL åŒ…å« `/tust-openatom-website`

### Q: ç™»å½•æ—¶è·³è½¬å¤±è´¥ï¼Ÿ
**A:** æ£€æŸ¥ Cloudflare Worker æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œè®¿é—® `/health` ç«¯ç‚¹æµ‹è¯•

### Q: æœ¬åœ°ä¿®æ”¹åä¸ç”Ÿæ•ˆï¼Ÿ
**A:** Jekyll ä¼šè‡ªåŠ¨é‡æ–°æ„å»ºï¼Œåˆ·æ–°æµè§ˆå™¨å³å¯

---

**æ€»ç»“ï¼šæœ¬åœ°è¿è¡Œå®Œå…¨æ²¡é—®é¢˜ï¼Œè€Œä¸”æ›´æ–¹ä¾¿å¼€å‘å’Œè°ƒè¯•ï¼** ğŸ‰



